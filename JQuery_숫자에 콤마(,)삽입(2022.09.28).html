<!-- 입력되는 숫자의 자릿수(3자리)에 맞춰서 콤마(,) 삽입해주기-->

<!doctype html>
<html lang="en">
<head>

<meta charset="UTF-8">
<script src="../../../IT_Lesson/수업예제/JQuery/jquery-1.11.0.min.js"></script>
<script>
    
        //------------------------------------------------------------------
        // body 태그 안의 요소들을 읽어들인 후 익명함수 내부의 자스 코딩을 실행.
        //------------------------------------------------------------------

        $(function(){

            
            // class=money 를 가진 태그를 관리하는 JQuery 객체의 메모리 위치 주소값을 얻어 변수 저장하기
            var moneyObj = $(".money");
              
            moneyObj.focus();

            
            //  [keyup 이벤트]가 발생하면 실행할 자스 코딩 설정하기
            moneyObj.keyup(function(){                      

               var thisObj = $(this);

                var money = thisObj.val();           

                var num ="";

                var nums ="0123456789";
               
                // money 변수 안의 데이터 중 숫자만 골라 num 변수에 누적시킴.

                for( var i=0; i<money.length ; i++){
                    
                    var str = money.charAt(i);

                    // 만약 str 변수 안의 데이터가 nums 변수 안에 존재하면
                    if( nums.indexOf(str)>=0 ){
                        // if( new RegExp(/^[0-9]{1}$/).test(str) ){      /// RegExp 객체가 가진 메소드 test에 문자 하나만 넣으면 되는 방식도 있음.
                         num = num + str;                               /// 숫자만 골라내어 num 변수 안에 숫자 누적시키기
                        // }
                        
                    }
                }


            /// 그러나 맨 앞에 0이 들어가면 안됨. 맨 앞의 0을 제거해줘야함.
            // num 변수 안의 첫글자가 0 으로 시작한다면 제거하기
            
                while ( num.length>=2 && num.indexOf("0")==0 ){          /// 문자의 길이가 2글자 이상  && 문자 "0"으로 시작한다는 조건.
                    /// 맨 앞에 있는 0을 제거하고 num 변수에 저장시키는 거.
                    num = num.substring(1);                             /// 순서번호 2번째부터 나머지 다 return 해서 num 변수 안에 저장하라는 의미. => 첫글자가 0일때 사라지라는 의미.

             
                }
                    
               
                // 콤마를 포함한 최종 숫자 문자열을 저장할 변수 선언
                var result ="";

                
                // num 변수 안의 데이터를 1개씩 쪼개서 Array 객체에 담기   
                var arr = num.split("");


                // cnt 변수 안의 숫자가 3의 배수일 때 콤마(,)를 삽입할 예정이다.
                var cnt = 0;


                /// 만약 3의 공배수라면 그 앞에 콤마 더해주는 반복문 작성.                
                /// 마지막 인덱스번호 = 마지막 배열의 갯수를 얻을 수 있는 arr.length-1 하면 된다.
                for( var i=arr.length-1 ; i>0; i--){          
                    cnt++;
                    if ( cnt%3==0 && i!=0){               
                        arr[i] = "," + arr[i];
                    }
                }

                
                
                // 배열 변수 안의 모든 데이터를 문자로 바꾸어 붙여서 result 에 저장하기 
                result = arr.join("")

                // keyup 태그에서 발생한 데이터를 result 에 저장.
                thisObj.val( result);


            })


        })






</script>

</head>

<body>

<center>
    
    <input type="text" name="money" class="money" size="20" maxlength="13">원
</center>
<hr><div class="msg"></div>
<!-- 빈 div 태그 만들어주기-->
<hr>
</body>

</html>


































































































































